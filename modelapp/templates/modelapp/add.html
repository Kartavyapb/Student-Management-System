<!DOCTYPE html>
<html lang="en">
<head>

    {% load static %}
    {% load crispy_forms_tags %}
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/add.css' %}">

    <title>Add Page</title>
</head>
<body>
    <h1> 1. Add Student Personal Details.... </h1><br><hr><br>

    <form action="" method="POST" enctype="multipart/form-data"> {% csrf_token %}

        {{ forms | crispy }}

    <a href="/contact/"><button class="btn btn-primary" type="Submit"> Save & Next </button></a>


    </form>

    <!-- Existing JS (Due_Fees Calculation) + New JS (Age Calculation) -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const dobInput = document.getElementById('id_DOB');
        const ageInput = document.getElementById('id_Age');

        function calculateAge() {
            const dobValue = dobInput.value;
            if (dobValue) {
                const dob = new Date(dobValue);
                const today = new Date();
                let age = today.getFullYear() - dob.getFullYear();
                const m = today.getMonth() - dob.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                    age--;
                }
                ageInput.value = age >= 0 ? age : 0;
            } else {
                ageInput.value = '';
            }
        }

        if (dobInput && ageInput) {
            dobInput.addEventListener('change', calculateAge);
        }
    });
</script>


</body>
</html>